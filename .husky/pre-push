#!/usr/bin/env sh

echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
echo "🚀 PRE-PUSH CHECKS"
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
echo ""

# Check linting
echo "┌─ [1/3] Lint Checks"
echo "│  Ensuring code quality standards are met..."
echo "│"
if pnpm lint; then
  echo "│  ✅ No linting issues found"
  echo "└─────────────────────────────────────────────────────────────────────────"
else
  echo "│  ❌ Linting failed!"
  echo "└─────────────────────────────────────────────────────────────────────────"
  exit 1
fi
echo ""

# Check types
echo "┌─ [2/3] Type Verification"
echo "│  Verifying type safety across the workspace..."
echo "│"
if pnpm typecheck; then
  echo "│  ✅ All types are correct"
  echo "└─────────────────────────────────────────────────────────────────────────"
else
  echo "│  ❌ Type check failed!"
  echo "└─────────────────────────────────────────────────────────────────────────"
  exit 1
fi
echo ""

# Verify TypeScript compilation succeeds
echo "┌─ [3/3] Build Verification"
echo "│  Ensuring code compiles successfully before push..."
echo "│"
if pnpm build > /dev/null 2>&1; then
  echo "│  ✅ Build successful - code compiles without errors"
  echo "└─────────────────────────────────────────────────────────────────────────"
else
  echo "│  ❌ Build failed!"
  echo "└─────────────────────────────────────────────────────────────────────────"
  exit 1
fi
echo ""

echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
echo "✅ ALL PRE-PUSH CHECKS PASSED!"
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
echo ""
echo "✨ Ready to push to remote!"
echo ""

