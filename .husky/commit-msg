#!/usr/bin/env sh

echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "ğŸ“ COMMIT MESSAGE VALIDATION"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""
echo "Validating commit message against Conventional Commits standards..."
echo ""

if pnpm exec commitlint --edit "$1"; then
  echo ""
  echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
  echo "âœ… COMMIT MESSAGE VALID!"
  echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
  echo ""
  exit 0
else
  echo ""
  echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
  echo "âŒ COMMIT MESSAGE VALIDATION FAILED"
  echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
  echo ""
  echo "Your commit message does not follow the Conventional Commits format."
  echo ""
  echo "ğŸ“‹ COMMIT MESSAGE RULES:"
  echo ""
  echo "  Format: <type>: <subject>"
  echo ""
  echo "  Valid types:"
  echo "    â€¢ feat      â†’ New feature"
  echo "    â€¢ fix       â†’ Bug fix"
  echo "    â€¢ chore     â†’ Maintenance tasks (dependencies, config, etc.)"
  echo "    â€¢ refactor  â†’ Code restructuring (no bug fix or feature)"
  echo "    â€¢ perf      â†’ Performance improvements"
  echo "    â€¢ docs      â†’ Documentation changes"
  echo "    â€¢ test      â†’ Adding or updating tests"
  echo "    â€¢ ci        â†’ CI/CD changes"
  echo "    â€¢ build     â†’ Build system changes"
  echo "    â€¢ style     â†’ Code style changes (formatting, whitespace, etc.)"
  echo ""
  echo "  Examples:"
  echo "    âœ… feat: add user authentication endpoint"
  echo "    âœ… fix: resolve CORS issue in preferences route"
  echo "    âœ… chore: update dependencies to latest versions"
  echo "    âœ… refactor: simplify logger configuration"
  echo ""
  echo "  Rules:"
  echo "    â€¢ Type must be lowercase"
  echo "    â€¢ Subject must be in lowercase"
  echo "    â€¢ No period at the end of subject"
  echo "    â€¢ Maximum 100 characters"
  echo ""
  echo "ğŸ’¡ Tip: Use 'git commit --amend' to fix your commit message"
  echo ""
  exit 1
fi
